<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kmerz.app.member">

<insert id="insertMember">
	insert into tbl_member(user_no, user_id, user_pw, user_name)
	values(seq_user_no.nextval, #{user_id}, #{user_pw}, #{user_name})
</insert>

<!-- 모든 유저 정보 -->
<select id="selectAll" resultType="MemberVo">
	select * from tbl_member order by user_currentlogin desc
</select>

<!-- id로 유저정보 찾기 -->
<select id="selectID" resultType="MemberVo">
	select * from tbl_member where user_id = #{user_id}
</select>

<!-- no로 유저정보 찾기 -->
<select id="selectNO" resultType="MemberVo">
	select * from tbl_member where user_no = #{user_no}
</select>

<!-- 로그인  -->
<select id="selectUser" resultType="MemberVo">
	select * from tbl_member where user_id = #{user_id} and user_pw = #{user_pw}
</select>

<!-- 최근 로그인 업데이트 -->
<update id="updateCurrentLogin">
	update tbl_member set user_currentlogin = sysdate
	where user_no = #{user_no}
</update>

<!-- 닉네임 사용가능 여부 체크 -->
<select id="selectUserCount" resultType="int">
	select count(*) from tbl_member
	where user_name = #{user_name}
	and user_status = #{user_status}
</select>

<!-- 닉네임 변경 -->
<update id="updateUserName">
	update tbl_member set user_name = #{user_name}
	where user_no = #{user_no}
</update>

<!-- 비밀번호 변경 -->
<update id="updateUserPw">
	update tbl_member set user_pw = #{user_pw}
	where user_no = #{user_no}
</update>

<!-- 프로필 이미지 변경 -->
<update id="updateUserProfileImage">
	update tbl_member set user_profileImage = #{filePath}
	where user_no = #{user_no}
</update>

<!-- 유저 상태 변경 -->
<update id="updateUserStatus">
	update tbl_memeber set user_status = #{user_status}
	where user_no = #{user_no}e
</update>

</mapper>